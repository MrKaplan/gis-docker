# 10 - NÃšCLEO FLORESTAL E RISCOS

## Ãndice
1. [VisÃ£o Geral](#1-visÃ£o-geral)
2. [Projectos do NÃºcleo](#2-projectos-do-nÃºcleo)
3. [Anchor Projects](#3-anchor-projects)
4. [AnÃ¡lise de IncÃªndios e RegeneraÃ§Ã£o](#4-anÃ¡lise-de-incÃªndios-e-regeneraÃ§Ã£o)
5. [AnÃ¡lise de Riscos Naturais](#5-anÃ¡lise-de-riscos-naturais)
6. [Ecologia e Biodiversidade](#6-ecologia-e-biodiversidade)
7. [Dados e Fontes](#7-dados-e-fontes)
8. [Metodologias](#8-metodologias)
9. [ImplementaÃ§Ã£o TÃ©cnica](#9-implementaÃ§Ã£o-tÃ©cnica)
10. [Outputs e Entregas](#10-outputs-e-entregas)
11. [ComunicaÃ§Ã£o](#11-comunicaÃ§Ã£o)

---

## 1. VisÃ£o Geral

### 1.1. IdentificaÃ§Ã£o do NÃºcleo

| Campo | Valor |
|-------|-------|
| **Prefixo** | NF- |
| **Nome** | NÃºcleo Florestal e Riscos |
| **Emoji** | ğŸŒ²ğŸ”¥ |
| **Ãrea GeogrÃ¡fica** | Toda a Ã¡rea de estudo |
| **Ãrea aproximada** | ~800 kmÂ² |
| **Anchor Projects** | NF-00 (Vulnerabilidade Global), NF-01/PS-07 (RegeneraÃ§Ã£o PÃ³s-Fogo - TESE) |

### 1.2. Contexto Territorial

O NÃºcleo Florestal e Riscos cobre **toda a Ã¡rea de estudo** e aborda:

- **Floresta:** OcupaÃ§Ã£o, desflorestaÃ§Ã£o, reflorestaÃ§Ã£o, maturidade
- **IncÃªndios:** HistÃ³rico, regeneraÃ§Ã£o pÃ³s-fogo, perigosidade
- **Riscos naturais:** ErosÃ£o, derrocadas, cheias
- **Ecologia:** Corredores, fragmentaÃ§Ã£o, espÃ©cies invasoras

### 1.3. RelevÃ¢ncia

| Aspecto | DescriÃ§Ã£o |
|---------|-----------|
| **IncÃªndios** | RegiÃ£o com histÃ³rico significativo de Ã¡rea ardida |
| **Riscos** | CombinaÃ§Ã£o de riscos (incÃªndio + erosÃ£o + cheias) |
| **Ecologia** | FragmentaÃ§Ã£o florestal, invasoras (acÃ¡cias) |
| **Pessoal** | **Tese de mestrado** sobre regeneraÃ§Ã£o pÃ³s-fogo |
| **PrÃ¡tico** | Apoio Ã  gestÃ£o florestal e proteÃ§Ã£o civil |

### 1.4. ImportÃ¢ncia EstratÃ©gica

Este nÃºcleo contÃ©m **2 dos 5 Anchor Projects**:

1. **PS-07/NF-01** - RegeneraÃ§Ã£o PÃ³s-Fogo (Tese de Mestrado) - **#1 no portfolio**
2. **NF-00** - Ãndice de Vulnerabilidade Global - **#5 no portfolio**

### 1.5. Temas Principais

| Tema | Projectos |
|------|-----------|
| **IncÃªndios** | NF-01, NF-07, NF-08 |
| **Floresta** | NF-02, NF-03, NF-04, NF-05, NF-06 |
| **Riscos** | NF-00, NF-09 |
| **Ecologia** | NF-10, NF-11, NF-12 |
| **Energia** | NF-13, NF-14 |

---

## 2. Projectos do NÃºcleo

### 2.1. Tabela Resumo

| ID | Nome | Tipo | Proc. | Prior. | Origem |
|----|------|------|-------|--------|--------|
| **NF-00** | â­ Vulnerabilidade Global | P+C | ğŸ–¥ï¸â†’ğŸŒ | ğŸ”´ | #269 |
| **NF-01** | â­ **RegeneraÃ§Ã£o PÃ³s-Fogo (TESE)** | **P** | ğŸŒ+ğŸŒ | ğŸ”´ | PS-07 |
| NF-02 | DesflorestaÃ§Ã£o | C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | #387 |
| NF-03 | ReflorestaÃ§Ã£o | C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | #388 |
| NF-04 | Maturidade Povoamentos | C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | #389 |
| NF-05 | Forest Carbon | C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¢ | #394 |
| NF-06 | LAI (Leaf Area Index) | C | ğŸŒ+ğŸŒ | ğŸŸ¢ | #400 |
| NF-07 | Ãreas Ardidas (histÃ³rico) | C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | ICNF |
| NF-08 | Perigosidade IncÃªndio | C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | Novo |
| NF-09 | Susceptibilidade Derrocadas | C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | #277 |
| NF-10 | AcÃ¡cias Invasoras | C+A | ğŸŒ+ğŸ–¥ï¸ | ğŸŸ¡ | #376 |
| NF-11 | Corredores EcolÃ³gicos | A+C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | #280 |
| NF-12 | FragmentaÃ§Ã£o Paisagem | C+A | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¡ | #281 |
| NF-13 | Wind Farm Suitability | A | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¢ | #353 |
| NF-14 | Turbine Visibility | A+C | ğŸ–¥ï¸â†’ğŸŒ | ğŸŸ¢ | #354 |

**Legenda:**
- **Tipo:** F=Ferramenta, P=Projecto, C=Camada, A=AnÃ¡lise
- **Proc.:** ğŸŒ=Online, ğŸ–¥ï¸=Desktop, ğŸŒ=GEE
- **Prior.:** ğŸ”´=Alta, ğŸŸ¡=MÃ©dia, ğŸŸ¢=Baixa

---

## 3. Anchor Projects

### 3.1. PS-07/NF-01 - RegeneraÃ§Ã£o PÃ³s-Fogo (TESE DE MESTRADO) â­â­â­

| Campo | Valor |
|-------|-------|
| **ID** | NF-01 / PS-07 |
| **Tipo** | **Projecto (Anchor #1)** |
| **Prioridade** | ğŸ”´ **MÃXIMA** |
| **Processamento** | ğŸŒ GEE + ğŸŒ Online |
| **Contexto** | **Tese de Mestrado pessoal** |

#### 3.1.1. Conceito

Este Ã© o **projecto mais importante do portfolio** â€” a tese de mestrado do autor, focada na anÃ¡lise da regeneraÃ§Ã£o vegetal apÃ³s incÃªndios florestais usando sÃ©ries temporais de 10 anos.

**TÃ­tulo provisÃ³rio:** *"AnÃ¡lise da regeneraÃ§Ã£o vegetal pÃ³s-incÃªndio no MÃ©dio Tejo: uma abordagem multitemporal com detecÃ§Ã£o remota"*

#### 3.1.2. Objectivos da Tese

1. Caracterizar a dinÃ¢mica de regeneraÃ§Ã£o pÃ³s-fogo na Ã¡rea de estudo
2. Identificar factores que influenciam a velocidade de recuperaÃ§Ã£o
3. Comparar diferentes tipos de vegetaÃ§Ã£o/uso do solo
4. Desenvolver indicadores de sucesso da regeneraÃ§Ã£o
5. Criar ferramenta de visualizaÃ§Ã£o e consulta

#### 3.1.3. Metodologia

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKFLOW DA TESE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. SELECÃ‡ÃƒO DE ÃREAS ARDIDAS                              â”‚
â”‚     â””â”€â”€ PerÃ­metros ICNF (2013-2023)                        â”‚
â”‚     â””â”€â”€ CritÃ©rios: >100 ha, informaÃ§Ã£o completa            â”‚
â”‚                                                             â”‚
â”‚  2. SÃ‰RIES TEMPORAIS (GEE)                                 â”‚
â”‚     â””â”€â”€ Sentinel-2 (2015-2025)                             â”‚
â”‚     â””â”€â”€ Landsat 8/9 (2013-2025)                            â”‚
â”‚     â””â”€â”€ Ãndices: NDVI, NBR, NDMI                           â”‚
â”‚                                                             â”‚
â”‚  3. ANÃLISE DE REGENERAÃ‡ÃƒO                                 â”‚
â”‚     â””â”€â”€ TrajectÃ³rias de recuperaÃ§Ã£o                        â”‚
â”‚     â””â”€â”€ Tempo para recuperaÃ§Ã£o (threshold)                 â”‚
â”‚     â””â”€â”€ ComparaÃ§Ã£o com Ã¡reas nÃ£o ardidas (controlo)        â”‚
â”‚                                                             â”‚
â”‚  4. FACTORES EXPLICATIVOS                                  â”‚
â”‚     â””â”€â”€ Severidade do fogo (dNBR)                         â”‚
â”‚     â””â”€â”€ Uso do solo prÃ©-fogo                               â”‚
â”‚     â””â”€â”€ Topografia (altitude, declive, exposiÃ§Ã£o)          â”‚
â”‚     â””â”€â”€ Clima (precipitaÃ§Ã£o pÃ³s-fogo)                      â”‚
â”‚     â””â”€â”€ GestÃ£o pÃ³s-fogo (reflorestaÃ§Ã£o?)                   â”‚
â”‚                                                             â”‚
â”‚  5. MODELAÃ‡ÃƒO                                              â”‚
â”‚     â””â”€â”€ RegressÃ£o: Tempo_recuperaÃ§Ã£o ~ Factores            â”‚
â”‚     â””â”€â”€ Random Forest para classificaÃ§Ã£o                   â”‚
â”‚                                                             â”‚
â”‚  6. WEBGIS + DASHBOARD                                     â”‚
â”‚     â””â”€â”€ VisualizaÃ§Ã£o de resultados                         â”‚
â”‚     â””â”€â”€ Ferramenta de consulta por Ã¡rea                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.4. Ãndices Espectrais

| Ãndice | FÃ³rmula | Uso |
|--------|---------|-----|
| **NDVI** | (NIR - Red) / (NIR + Red) | Vigor vegetaÃ§Ã£o |
| **NBR** | (NIR - SWIR2) / (NIR + SWIR2) | Severidade fogo |
| **dNBR** | NBR_prÃ© - NBR_pÃ³s | Delta de severidade |
| **RdNBR** | dNBR / âˆš(NBR_prÃ©) | Normalizado |
| **NDMI** | (NIR - SWIR1) / (NIR + SWIR1) | Humidade vegetaÃ§Ã£o |

#### 3.1.5. Classes de Severidade (dNBR)

| Classe | dNBR | DescriÃ§Ã£o |
|--------|------|-----------|
| NÃ£o ardido | < 0.1 | Sem alteraÃ§Ã£o |
| Baixa | 0.1 - 0.27 | Chamuscado |
| MÃ©dia-baixa | 0.27 - 0.44 | Parcialmente consumido |
| MÃ©dia-alta | 0.44 - 0.66 | Muito afectado |
| Alta | > 0.66 | Totalmente consumido |

#### 3.1.6. ImplementaÃ§Ã£o GEE

```javascript
// Google Earth Engine - SÃ©rie temporal NBR

var firePerimeter = ee.FeatureCollection('users/xxx/fire_2017');
var startDate = '2017-01-01';
var endDate = '2025-01-01';

// Sentinel-2
var s2 = ee.ImageCollection('COPERNICUS/S2_SR_HARMONIZED')
  .filterBounds(firePerimeter)
  .filterDate(startDate, endDate)
  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 20));

// Adicionar NBR
var addNBR = function(image) {
  var nbr = image.normalizedDifference(['B8', 'B12']).rename('NBR');
  return image.addBands(nbr);
};

var s2NBR = s2.map(addNBR);

// SÃ©rie temporal mensal
var months = ee.List.sequence(0, 96);  // 8 anos Ã— 12 meses
var nbrTimeSeries = months.map(function(m) {
  var start = ee.Date(startDate).advance(m, 'month');
  var end = start.advance(1, 'month');
  var monthly = s2NBR.filterDate(start, end).median();
  return monthly.set('system:time_start', start.millis());
});

// Calcular mÃ©dia por Ã¡rea ardida
var nbrMean = ee.ImageCollection(nbrTimeSeries)
  .map(function(img) {
    var mean = img.reduceRegion({
      reducer: ee.Reducer.mean(),
      geometry: firePerimeter,
      scale: 10
    });
    return img.set('NBR_mean', mean.get('NBR'));
  });

// Exportar sÃ©rie temporal
Export.table.toDrive({
  collection: nbrMean,
  description: 'NBR_timeseries',
  fileFormat: 'CSV'
});
```

#### 3.1.7. Cronograma da Tese

| Fase | Actividade | DuraÃ§Ã£o |
|------|------------|---------|
| 1 | RevisÃ£o bibliogrÃ¡fica | 2 meses |
| 2 | SelecÃ§Ã£o e preparaÃ§Ã£o de dados | 1 mÃªs |
| 3 | Processamento GEE | 2 meses |
| 4 | AnÃ¡lise estatÃ­stica | 2 meses |
| 5 | Desenvolvimento WebGIS | 1 mÃªs |
| 6 | RedacÃ§Ã£o | 3 meses |
| 7 | RevisÃ£o e defesa | 1 mÃªs |
| **Total** | | **~12 meses** |

---

### 3.2. NF-00 - Ãndice de Vulnerabilidade Global â­

| Campo | Valor |
|-------|-------|
| **ID** | NF-00 |
| **Tipo** | **Projecto + Camada (Anchor #5)** |
| **Prioridade** | ğŸ”´ Alta |
| **Processamento** | ğŸ–¥ï¸ Desktop â†’ ğŸŒ Online |
| **Origem** | #269 |

#### 3.2.1. Conceito

Criar um **Ã­ndice integrado de vulnerabilidade** que combine mÃºltiplos riscos naturais:
- IncÃªndio florestal
- ErosÃ£o hÃ­drica
- Derrocadas/deslizamentos
- Cheias

#### 3.2.2. Metodologia

```
VULNERABILIDADE GLOBAL = f(Perigosidade, ExposiÃ§Ã£o, Capacidade)

Componentes:
â”œâ”€â”€ PERIGOSIDADE (Hazard)
â”‚   â”œâ”€â”€ IncÃªndio: NF-08
â”‚   â”œâ”€â”€ ErosÃ£o: NA-10 (USLE)
â”‚   â”œâ”€â”€ Derrocadas: NF-09
â”‚   â””â”€â”€ Cheias: NH-05/NH-06
â”‚
â”œâ”€â”€ EXPOSIÃ‡ÃƒO (Exposure)
â”‚   â”œâ”€â”€ PopulaÃ§Ã£o (Censos)
â”‚   â”œâ”€â”€ Edificado
â”‚   â””â”€â”€ Infraestruturas
â”‚
â””â”€â”€ CAPACIDADE (Coping Capacity)
    â”œâ”€â”€ Acesso a serviÃ§os emergÃªncia
    â””â”€â”€ Cobertura bombeiros
```

#### 3.2.3. FÃ³rmula de IntegraÃ§Ã£o

```python
def calculate_global_vulnerability(
    fire_hazard,      # 0-1
    erosion_hazard,   # 0-1
    landslide_hazard, # 0-1
    flood_hazard,     # 0-1
    exposure,         # 0-1
    capacity          # 0-1
):
    """
    Calcula Ã­ndice de vulnerabilidade global.
    """
    # CombinaÃ§Ã£o de perigosidades (mÃ¡ximo ou mÃ©dia ponderada)
    hazard = np.maximum.reduce([
        fire_hazard * 0.35,
        erosion_hazard * 0.25,
        landslide_hazard * 0.20,
        flood_hazard * 0.20
    ])
    
    # Vulnerabilidade = Hazard Ã— Exposure / Capacity
    vulnerability = (hazard * exposure) / (capacity + 0.1)
    
    # Normalizar 0-1
    return normalize(vulnerability)
```

#### 3.2.4. Outputs

- Mapa de vulnerabilidade global (5 classes)
- Mapas por componente de risco
- Dashboard com estatÃ­sticas por freguesia
- IdentificaÃ§Ã£o de hotspots prioritÃ¡rios

---

## 4. AnÃ¡lise de IncÃªndios e RegeneraÃ§Ã£o

### 4.1. NF-07 - Ãreas Ardidas (histÃ³rico)

| Campo | Valor |
|-------|-------|
| **ID** | NF-07 |
| **Tipo** | Camada |
| **Prioridade** | ğŸŸ¡ MÃ©dia |
| **Processamento** | ğŸ–¥ï¸ Desktop â†’ ğŸŒ Online |
| **Fonte** | ICNF |

**Objectivo:** Compilar e publicar histÃ³rico de Ã¡reas ardidas.

**Dados:** PerÃ­metros ICNF (2001-presente)

**AnÃ¡lises:**
- Ãrea ardida por ano
- RecorrÃªncia de incÃªndios
- TendÃªncias temporais
- Sazonalidade

**Outputs:**
- Mapa de perÃ­metros por ano
- Mapa de recorrÃªncia (nÂº de vezes ardido)
- GrÃ¡ficos temporais

---

### 4.2. NF-08 - Perigosidade IncÃªndio

| Campo | Valor |
|-------|-------|
| **ID** | NF-08 |
| **Tipo** | Camada |
| **Prioridade** | ğŸŸ¡ MÃ©dia |
| **Processamento** | ğŸ–¥ï¸ Desktop â†’ ğŸŒ Online |
| **Origem** | Novo |

**Objectivo:** Modelar perigosidade de incÃªndio florestal.

**Factores:**

| Factor | Peso | Fonte |
|--------|------|-------|
| OcupaÃ§Ã£o do solo | 30% | COS |
| Declive | 20% | MDT |
| ExposiÃ§Ã£o solar | 15% | MDT |
| HistÃ³rico de incÃªndios | 15% | ICNF |
| DistÃ¢ncia a estradas | 10% | OSM |
| Densidade populacional | 10% | Censos |

**Metodologia AHP:**
```python
def fire_hazard_index(land_cover, slope, aspect, history, 
                      road_distance, population):
    """
    Calcula Ã­ndice de perigosidade de incÃªndio.
    """
    # Reclassificar ocupaÃ§Ã£o do solo
    lc_risk = reclassify_land_cover(land_cover)
    # Eucalipto/Pinheiro = Alto, AgrÃ­cola = Baixo, Urbano = Muito Baixo
    
    # Declive (>30% = muito alto)
    slope_risk = classify(slope, [0, 10, 20, 30], [1, 2, 3, 4])
    
    # ExposiÃ§Ã£o (Sul/Oeste = mais risco)
    aspect_risk = classify_aspect(aspect)
    
    # CombinaÃ§Ã£o AHP
    hazard = (
        0.30 * lc_risk +
        0.20 * slope_risk +
        0.15 * aspect_risk +
        0.15 * history_risk +
        0.10 * road_risk +
        0.10 * pop_risk
    )
    
    return hazard
```

---

## 5. AnÃ¡lise de Riscos Naturais

### 5.1. NF-09 - Susceptibilidade Derrocadas

| Campo | Valor |
|-------|-------|
| **ID** | NF-09 |
| **Tipo** | Camada |
| **Prioridade** | ğŸŸ¡ MÃ©dia |
| **Processamento** | ğŸ–¥ï¸ Desktop â†’ ğŸŒ Online |
| **Origem** | #277 |

**Objectivo:** Modelar susceptibilidade a movimentos de massa.

**Factores:**

| Factor | DescriÃ§Ã£o | Fonte |
|--------|-----------|-------|
| Declive | Principal factor | MDT |
| Geologia | Litologia, fracturas | LNEG |
| Uso do solo | Cobertura vegetal | COS |
| Curvatura | Perfil e planta | MDT |
| TWI | SaturaÃ§Ã£o potencial | MDT |
| DistÃ¢ncia falhas | FracturaÃ§Ã£o | LNEG |

**Metodologia:**
```
Susceptibilidade = f(Declive, Geologia, Uso_Solo, 
                     Curvatura, TWI, Fracturas)

MÃ©todo: AHP ou RegressÃ£o LogÃ­stica

Classes:
1. Muito Baixa
2. Baixa
3. Moderada
4. Alta
5. Muito Alta
```

**ValidaÃ§Ã£o:** Comparar com inventÃ¡rio de movimentos (se disponÃ­vel) ou REN.

---

## 6. Ecologia e Biodiversidade

### 6.1. NF-10 - AcÃ¡cias Invasoras

| Campo | Valor |
|-------|-------|
| **ID** | NF-10 |
| **Tipo** | Camada + AnÃ¡lise |
| **Prioridade** | ğŸŸ¡ MÃ©dia |
| **Processamento** | ğŸŒ GEE + ğŸ–¥ï¸ Desktop |
| **Origem** | #376 |

**Objectivo:** Detectar e mapear acÃ¡cias invasoras usando detecÃ§Ã£o remota.

**Metodologia:**
```
Abordagem: DetecÃ§Ã£o da floraÃ§Ã£o (Fevereiro-MarÃ§o)

1. Identificar perÃ­odo de floraÃ§Ã£o (flores amarelas)
2. Usar Sentinel-2: relaÃ§Ã£o B4/B3 anÃ³mala
3. ValidaÃ§Ã£o de campo
4. ClassificaÃ§Ã£o supervisionada
```

**ImplementaÃ§Ã£o GEE:**
```javascript
// DetecÃ§Ã£o de floraÃ§Ã£o de acÃ¡cias
var flowering_period = ee.DateRange('2024-02-15', '2024-03-31');

var s2 = ee.ImageCollection('COPERNICUS/S2_SR_HARMONIZED')
  .filterBounds(roi)
  .filterDate(flowering_period)
  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 10))
  .median();

// Ãndice de "amarelo" (floraÃ§Ã£o)
var yellowIndex = s2.expression(
  '(B4 - B3) / (B4 + B3)',
  {'B4': s2.select('B4'), 'B3': s2.select('B3')}
).rename('yellowIndex');

// Threshold para floraÃ§Ã£o
var acacia_potential = yellowIndex.gt(0.15);
```

**Outputs:**
- Mapa de distribuiÃ§Ã£o provÃ¡vel
- Ãrea estimada
- RecomendaÃ§Ãµes de gestÃ£o

**ComunicaÃ§Ã£o:** Potencial artigo blog "Como detectar acÃ¡cias invasoras com satÃ©lites".

---

### 6.2. NF-11 - Corredores EcolÃ³gicos

| Campo | Valor |
|-------|-------|
| **ID** | NF-11 |
| **Tipo** | AnÃ¡lise + Camada |
| **Prioridade** | ğŸŸ¡ MÃ©dia |
| **Processamento** | ğŸ–¥ï¸ Desktop â†’ ğŸŒ Online |
| **Origem** | #280 |

**Objectivo:** Identificar e mapear corredores ecolÃ³gicos potenciais.

**Metodologia: Land Facet Corridor**
```
1. Identificar patches de habitat (florestas, matos)
2. Criar superfÃ­cie de custo (resistÃªncia Ã  dispersÃ£o)
3. Calcular least-cost paths entre patches
4. Identificar corredores de conectividade
```

**SuperfÃ­cie de custo:**

| Uso do Solo | Custo |
|-------------|-------|
| Floresta nativa | 1 |
| Matos | 2 |
| AgrÃ­cola extensivo | 5 |
| AgrÃ­cola intensivo | 10 |
| Urbano | 100 |
| Estradas | 50-100 |

**Ferramentas:**
- QGIS: r.cost, r.drain (via GRASS)
- Python: scikit-image, networkx

---

### 6.3. NF-12 - FragmentaÃ§Ã£o Paisagem

| Campo | Valor |
|-------|-------|
| **ID** | NF-12 |
| **Tipo** | Camada + AnÃ¡lise |
| **Prioridade** | ğŸŸ¡ MÃ©dia |
| **Processamento** | ğŸ–¥ï¸ Desktop â†’ ğŸŒ Online |
| **Origem** | #281 |

**Objectivo:** Calcular mÃ©tricas de fragmentaÃ§Ã£o da paisagem.

**Ferramenta:** pylandstats (Python)

**MÃ©tricas a calcular:**

| MÃ©trica | DescriÃ§Ã£o | NÃ­vel |
|---------|-----------|-------|
| NP | NÃºmero de patches | Classe |
| PD | Densidade de patches | Classe |
| LPI | Largest Patch Index | Classe |
| ED | Edge Density | Classe |
| SHAPE | Shape Index mÃ©dio | Classe |
| COHESION | CoesÃ£o do patch | Classe |
| SHDI | Shannon Diversity | Paisagem |
| CONTAG | ContÃ¡gio | Paisagem |

**ImplementaÃ§Ã£o:**
```python
import pylandstats as pls

# Carregar mapa de ocupaÃ§Ã£o do solo
landscape = pls.Landscape('cos_2018.tif')

# MÃ©tricas ao nÃ­vel da paisagem
landscape_metrics = landscape.compute_landscape_metrics_df()

# MÃ©tricas por classe
class_metrics = landscape.compute_class_metrics_df()

# ComparaÃ§Ã£o temporal
cos_1995 = pls.Landscape('cos_1995.tif')
cos_2018 = pls.Landscape('cos_2018.tif')

# MudanÃ§a de fragmentaÃ§Ã£o
fragmentation_change = compare_landscapes(cos_1995, cos_2018)
```

---

## 7. Dados e Fontes

### 7.1. Dados de IncÃªndios

| Dado | Fonte | Formato | ActualizaÃ§Ã£o |
|------|-------|---------|--------------|
| PerÃ­metros Ã¡rea ardida | ICNF | SHP | Anual |
| Sentinel-2 (NBR) | Copernicus | Raster | 5 dias |
| Landsat (histÃ³rico) | USGS | Raster | 16 dias |

### 7.2. Dados de Floresta

| Dado | Fonte | Formato | ActualizaÃ§Ã£o |
|------|-------|---------|--------------|
| COS (ocupaÃ§Ã£o solo) | DGT | Vector | ~3 anos |
| InventÃ¡rio Florestal | ICNF | Vector/Tabular | ~10 anos |
| LiDAR (altura) | DGT | Raster | VariÃ¡vel |

### 7.3. Dados de Riscos

| Dado | Fonte | Formato | Uso |
|------|-------|---------|-----|
| MDT LiDAR | DGT | Raster | Declive, curvatura |
| Geologia | LNEG | Vector | Litologia, falhas |
| REN | CCDR | Vector | ValidaÃ§Ã£o |

### 7.4. Dados ClimÃ¡ticos

| Dado | Fonte | Formato | Uso |
|------|-------|---------|-----|
| PrecipitaÃ§Ã£o | IPMA | Tabular | RegeneraÃ§Ã£o |
| Temperatura | IPMA | Tabular | Perigosidade |
| Ãndice FWI | IPMA | Raster | Risco incÃªndio |

---

## 8. Metodologias

### 8.1. NBR e dNBR

```python
import ee

def calculate_severity(pre_image, post_image):
    """
    Calcula severidade do fogo usando dNBR.
    
    Args:
        pre_image: Imagem prÃ©-fogo
        post_image: Imagem pÃ³s-fogo imediata
    
    Returns:
        Imagem de severidade classificada
    """
    # NBR = (NIR - SWIR2) / (NIR + SWIR2)
    nbr_pre = pre_image.normalizedDifference(['B8', 'B12'])
    nbr_post = post_image.normalizedDifference(['B8', 'B12'])
    
    # dNBR
    dnbr = nbr_pre.subtract(nbr_post)
    
    # RdNBR (relativizado)
    rdnbr = dnbr.divide(nbr_pre.abs().sqrt())
    
    # Classificar severidade
    severity = dnbr.where(dnbr.lt(0.1), 0)  # NÃ£o ardido
    severity = severity.where(dnbr.gte(0.1).And(dnbr.lt(0.27)), 1)  # Baixa
    severity = severity.where(dnbr.gte(0.27).And(dnbr.lt(0.44)), 2)  # MÃ©dia-baixa
    severity = severity.where(dnbr.gte(0.44).And(dnbr.lt(0.66)), 3)  # MÃ©dia-alta
    severity = severity.where(dnbr.gte(0.66), 4)  # Alta
    
    return severity.rename('severity')
```

### 8.2. TrajectÃ³ria de RecuperaÃ§Ã£o

```python
def analyze_recovery_trajectory(fire_polygon, fire_date, end_date):
    """
    Analisa trajectÃ³ria de recuperaÃ§Ã£o NDVI pÃ³s-fogo.
    """
    # SÃ©rie temporal mensal
    months = get_months_between(fire_date, end_date)
    
    ndvi_series = []
    for month in months:
        ndvi = get_monthly_ndvi(fire_polygon, month)
        ndvi_series.append({
            'date': month,
            'ndvi_mean': ndvi['mean'],
            'ndvi_std': ndvi['std']
        })
    
    # Calcular mÃ©tricas de recuperaÃ§Ã£o
    baseline_ndvi = get_pre_fire_ndvi(fire_polygon, fire_date)
    
    recovery_metrics = {
        'time_to_50': find_recovery_time(ndvi_series, baseline_ndvi, 0.5),
        'time_to_80': find_recovery_time(ndvi_series, baseline_ndvi, 0.8),
        'time_to_100': find_recovery_time(ndvi_series, baseline_ndvi, 1.0),
        'max_ndvi': max(s['ndvi_mean'] for s in ndvi_series),
        'recovery_rate': calculate_recovery_rate(ndvi_series)
    }
    
    return ndvi_series, recovery_metrics
```

### 8.3. AnÃ¡lise MulticritÃ©rio (AHP)

```python
def ahp_weights(comparison_matrix):
    """
    Calcula pesos AHP a partir de matriz de comparaÃ§Ã£o.
    """
    import numpy as np
    
    # Normalizar colunas
    col_sums = comparison_matrix.sum(axis=0)
    normalized = comparison_matrix / col_sums
    
    # MÃ©dia das linhas = pesos
    weights = normalized.mean(axis=1)
    
    # Verificar consistÃªncia (CR < 0.1)
    consistency_ratio = calculate_consistency_ratio(comparison_matrix, weights)
    
    if consistency_ratio > 0.1:
        print(f"Aviso: CR = {consistency_ratio:.3f} > 0.1, matriz inconsistente")
    
    return weights
```

---

## 9. ImplementaÃ§Ã£o TÃ©cnica

### 9.1. Estrutura de Ficheiros

```
projects/nucleo-florestal-riscos/
â”‚
â”œâ”€â”€ README.md
â”œâ”€â”€ followup.md
â”‚
â”œâ”€â”€ tese/                              # PS-07/NF-01
â”‚   â”œâ”€â”€ capitulos/
â”‚   â”œâ”€â”€ figuras/
â”‚   â”œâ”€â”€ dados/
â”‚   â””â”€â”€ referencias.bib
â”‚
â”œâ”€â”€ notebooks/
â”‚   â”œâ”€â”€ 01_areas_ardidas.ipynb        # NF-07
â”‚   â”œâ”€â”€ 02_severidade.ipynb           # NF-01
â”‚   â”œâ”€â”€ 03_regeneracao.ipynb          # NF-01
â”‚   â”œâ”€â”€ 04_perigosidade.ipynb         # NF-08
â”‚   â”œâ”€â”€ 05_derrocadas.ipynb           # NF-09
â”‚   â”œâ”€â”€ 06_vulnerabilidade.ipynb      # NF-00
â”‚   â”œâ”€â”€ 07_acacias.ipynb              # NF-10
â”‚   â”œâ”€â”€ 08_corredores.ipynb           # NF-11
â”‚   â””â”€â”€ 09_fragmentacao.ipynb         # NF-12
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ gee_nbr_timeseries.js
â”‚   â”œâ”€â”€ severity.py
â”‚   â”œâ”€â”€ recovery.py
â”‚   â”œâ”€â”€ fire_hazard.py
â”‚   â”œâ”€â”€ landslide.py
â”‚   â””â”€â”€ vulnerability.py
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ fires/
â”‚   â”œâ”€â”€ forest/
â”‚   â””â”€â”€ risks/
â”‚
â””â”€â”€ outputs/
    â”œâ”€â”€ raster/
    â”œâ”€â”€ vector/
    â”œâ”€â”€ figures/
    â””â”€â”€ tables/
```

### 9.2. DependÃªncias entre Projectos

```
PB-00 (MDT LiDAR)
    â”‚
    â”œâ”€â”€ NF-08 (Perigosidade IncÃªndio)
    â”‚
    â”œâ”€â”€ NF-09 (Susceptibilidade Derrocadas)
    â”‚
    â””â”€â”€ Derivados topogrÃ¡ficos

NF-07 (Ãreas Ardidas HistÃ³rico)
    â”‚
    â””â”€â”€ NF-01 (RegeneraÃ§Ã£o PÃ³s-Fogo - TESE) â­â­â­
            â”‚
            â””â”€â”€ Dashboard + WebGIS

NF-08 + NF-09 + NA-10 + NH-05
    â”‚
    â””â”€â”€ NF-00 (Vulnerabilidade Global) â­

COS (OcupaÃ§Ã£o Solo)
    â”‚
    â”œâ”€â”€ NF-02 (DesflorestaÃ§Ã£o)
    â”œâ”€â”€ NF-03 (ReflorestaÃ§Ã£o)
    â”œâ”€â”€ NF-11 (Corredores)
    â””â”€â”€ NF-12 (FragmentaÃ§Ã£o)

GEE (Sentinel-2)
    â”‚
    â”œâ”€â”€ NF-01 (NBR/NDVI temporal)
    â”œâ”€â”€ NF-06 (LAI)
    â””â”€â”€ NF-10 (AcÃ¡cias)
```

---

## 10. Outputs e Entregas

### 10.1. Tese de Mestrado (NF-01/PS-07)

**EntregÃ¡veis acadÃ©micos:**
- DissertaÃ§Ã£o escrita
- Defesa pÃºblica
- Artigo cientÃ­fico (se aceite)

**EntregÃ¡veis portfolio:**
- WebGIS de regeneraÃ§Ã£o pÃ³s-fogo
- Dashboard com sÃ©ries temporais
- CÃ³digo reproduzÃ­vel no GitHub
- Posts LinkedIn e blog

### 10.2. Dashboard WebGIS

**URL:** `regeneracao.meudominio.pt` ou `meudominio.pt/webgis/regeneracao/`

**Funcionalidades:**
- Mapa de Ã¡reas ardidas (seleccionÃ¡vel por ano)
- SÃ©rie temporal NDVI/NBR por Ã¡rea
- ComparaÃ§Ã£o entre Ã¡reas
- Download de dados

### 10.3. Camadas Publicadas

| Camada | Tipo | Formato |
|--------|------|---------|
| Ãreas ardidas (por ano) | Vector | PostGIS â†’ Martin |
| Severidade (por incÃªndio) | Raster | COG â†’ TiTiler |
| RecuperaÃ§Ã£o actual | Raster | COG â†’ TiTiler |
| Perigosidade incÃªndio | Raster | COG â†’ TiTiler |
| Vulnerabilidade global | Raster | COG â†’ TiTiler |
| Susceptibilidade derrocadas | Raster | COG â†’ TiTiler |
| AcÃ¡cias (potencial) | Vector | PostGIS â†’ Martin |

---

## 11. ComunicaÃ§Ã£o

### 11.1. LinkedIn Post - Tese

**Headline:** "10 anos de recuperaÃ§Ã£o florestal em mapas: a minha tese de mestrado ğŸŒ²ğŸ”¥"

**Body:**
```
Acabei de entregar a minha tese de mestrado sobre regeneraÃ§Ã£o 
pÃ³s-incÃªndio no MÃ©dio Tejo.

O que fiz:
ğŸ“Š Analisei 10 anos de imagens de satÃ©lite (Sentinel-2 + Landsat)
ğŸ”¥ Estudei a recuperaÃ§Ã£o de X Ã¡reas ardidas desde 2013
ğŸ“ˆ Identifiquei os factores que mais influenciam a regeneraÃ§Ã£o
ğŸ—ºï¸ Criei um WebGIS para visualizar os resultados

Principais descobertas:
- O tempo mÃ©dio de recuperaÃ§Ã£o Ã© de X anos
- Ãreas com eucalipto recuperam mais rÃ¡pido mas...
- O declive e a severidade sÃ£o os factores mais importantes

Todo o cÃ³digo e dados estÃ£o disponÃ­veis: [GitHub]
Explorem o WebGIS: [link]

#Mestrado #GIS #RemoteSensing #IncÃªndios #Portugal
```

### 11.2. LinkedIn Post - Vulnerabilidade

**Headline:** "Mapeei os riscos naturais do MÃ©dio Tejo: onde se cruzam incÃªndios, erosÃ£o e cheias ğŸ—ºï¸"

**Body:**
```
Criei um Ã­ndice de vulnerabilidade global que integra:

ğŸ”¥ Perigosidade de incÃªndio
ğŸ’§ Risco de cheia
â›°ï¸ Susceptibilidade a derrocadas
ğŸŒ§ï¸ ErosÃ£o hÃ­drica

O resultado? Um mapa que mostra onde os riscos se acumulam 
e quais as zonas prioritÃ¡rias para intervenÃ§Ã£o.

[imagem do mapa]

Dashboard interactivo: [link]

Metodologia: AHP + GIS + dados abertos.

#GIS #Riscos #ProtecÃ§Ã£oCivil #Portugal #OpenData
```

### 11.3. Artigo Blog - AcÃ¡cias

**TÃ­tulo:** "Detectar acÃ¡cias invasoras com imagens de satÃ©lite: um guia prÃ¡tico"

**SecÃ§Ãµes:**
1. O problema das acÃ¡cias em Portugal
2. Por que a floraÃ§Ã£o Ã© a chave
3. Metodologia: Ã­ndice de "amarelo"
4. ImplementaÃ§Ã£o em Google Earth Engine
5. ValidaÃ§Ã£o de campo
6. LimitaÃ§Ãµes e melhorias
7. CÃ³digo disponÃ­vel

---

## Documentos Relacionados

| Documento | ConteÃºdo |
|-----------|----------|
| `04_BACKLOG_PROJECTOS.md` | Lista completa de projectos |
| `05_PROJECTO_BASE_BIOFISICO.md` | Dados base (MDT) - PB-00 |
| `06_NUCLEO_AGRICOLA.md` | Complementar (erosÃ£o USLE) |
| `07_NUCLEO_HIDRICO.md` | Complementar (cheias) |
| `12_ANCHOR_PROJECTS.md` | Detalhe dos anchor projects |
| `13_BIBLIOGRAFIA.md` | ReferÃªncias sobre incÃªndios e riscos |

---

## HistÃ³rico de VersÃµes

| Data | VersÃ£o | AlteraÃ§Ãµes |
|------|--------|------------|
| 2025-01-27 | 1.0 | Conceito em 04_BACKLOG |
| 2025-01-28 | 2.0 | Documento completo, 15 projectos detalhados, tese expandida |

---

*Documento gerado a partir de conversa de planeamento. Ãšltima actualizaÃ§Ã£o: Janeiro 2025*
